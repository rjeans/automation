# Configure kubelet to properly handle subPath mounts for local-path-provisioner
# This is required for Talos to support subPath mounts with local-path-provisioner
# Without this, fsGroup permissions don't propagate correctly to subPath mounts
# Path must match the local-path-provisioner storage location
machine:
  kubelet:
    extraMounts:
      - destination: /var/lib/rancher/local-path-provisioner
        type: bind
        source: /var/lib/rancher/local-path-provisioner
        options:
          - bind
          - rshared
          - rw
